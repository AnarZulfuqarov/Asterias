import './index.scss';
import logo from '../../../assets/logo.png';
import { NavLink, useLocation, useNavigate } from 'react-router-dom';
import Cookies from 'js-cookie';
import { useState } from 'react';

function AdminLeftBar() {
    const location = useLocation();
    const navigate = useNavigate();
    const [showModal, setShowModal] = useState(false); // State for modal visibility

    const handleLogout = () => {
        Cookies.remove('asteriasToken');
        navigate('/');
    };

    // Function to open the modal
    const confirmLogout = () => {
        setShowModal(true);
    };

    // Function to handle logout confirmation
    const handleConfirmLogout = () => {
        handleLogout();
        setShowModal(false);
    };

    // Function to cancel logout
    const handleCancelLogout = () => {
        setShowModal(false);
    };

    return (
        <section id="adminLeftBar">
            <img src={logo} alt="logo" />
            <div className="logoutAyir">
                <div>
                    <li className={location.pathname === '/admin/services' ? 'selected' : ''}>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            className="icon"
                        >
                            <path
                                d="M16.1249 1.875V2.9295C15.5097 3.03406 14.9256 3.27438 14.4149 3.633L13.6409 2.9055L12.6097 4.008L13.3597 4.71075C13.0174 5.21123 12.7855 5.77879 12.6794 6.37575H11.6249V7.87575H12.6794C12.7889 8.49825 13.0349 9.06525 13.3829 9.56325L12.5857 10.3358L13.6657 11.4158L14.4382 10.6178C14.9362 10.9658 15.5032 11.2118 16.1257 11.3213V12.375H17.6257V11.3205C18.2226 11.2146 18.7901 10.983 19.2907 10.641L19.9927 11.391L21.0952 10.359L20.3677 9.5865C20.7202 9.084 20.9602 8.50275 21.0712 7.875H22.1249V6.375H21.0704C20.9627 5.76767 20.7225 5.19152 20.3669 4.6875L21.0704 3.984L20.0152 2.9295L19.3124 3.633C18.8084 3.27743 18.2323 3.03724 17.6249 2.9295V1.875H16.1249ZM16.8749 4.35975C17.2388 4.35736 17.5995 4.42725 17.9361 4.56536C18.2727 4.70347 18.5785 4.90705 18.8358 5.1643C19.0932 5.42154 19.2968 5.72733 19.435 6.06391C19.5732 6.40049 19.6432 6.76116 19.6409 7.125C19.6409 8.66625 18.4162 9.891 16.8749 9.891C15.3337 9.891 14.1089 8.66625 14.1089 7.125C14.1089 5.58375 15.3337 4.359 16.8749 4.359V4.35975ZM7.14743 8.7885L5.76593 9.351L6.30443 10.7085C5.58765 11.1375 4.98467 11.7328 4.54643 12.444L3.21143 11.904L2.64893 13.2878L3.98393 13.8263C3.87859 14.232 3.82368 14.6491 3.82043 15.0683C3.82043 15.4958 3.88418 15.9128 3.98393 16.3103L2.64893 16.8503L3.21143 18.2325L4.54643 17.6925C4.98077 18.4129 5.58419 19.0166 6.30443 19.4513L5.76443 20.7863L7.14818 21.3488L7.68818 20.0138C8.09388 20.1191 8.51103 20.174 8.93018 20.1773C9.35768 20.1773 9.77618 20.1135 10.1722 20.0138L10.7122 21.3488L12.0944 20.7863L11.5544 19.4513C12.2664 19.0139 12.8618 18.4108 13.2899 17.6933L14.6474 18.2318L15.2099 16.8495L13.8524 16.3095C13.9499 15.912 14.0159 15.4943 14.0159 15.0675C14.0159 14.64 13.9507 14.2215 13.8509 13.8248L15.2107 13.2863L14.6482 11.9025L13.2907 12.4425C12.8597 11.7332 12.2645 11.138 11.5552 10.707L12.0952 9.3495L10.7114 8.787L10.1737 10.1445C9.76741 10.0408 9.35019 9.98618 8.93093 9.98175C8.50343 9.98175 8.08643 10.0463 7.68893 10.1453L7.14893 8.78775L7.14743 8.7885ZM8.92943 11.4825C10.9267 11.4825 12.5144 13.0725 12.5144 15.069C12.5159 17.0663 10.9267 18.678 8.92943 18.678C8.45532 18.6786 7.98575 18.5856 7.54762 18.4045C7.10949 18.2233 6.7114 17.9575 6.37616 17.6223C6.04091 17.287 5.7751 16.8889 5.59394 16.4508C5.41278 16.0127 5.31983 15.5431 5.32043 15.069C5.32043 13.0717 6.93293 11.4825 8.92943 11.4825Z"
                                fill="black"
                            />
                        </svg>
                        <NavLink to="/admin/services">Xidmətlər</NavLink>
                    </li>
                    <li className={location.pathname === '/admin/contact' ? 'selected' : ''}>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            className="icon"
                        >
                            <path
                                d="M8 4V2M16 4V2M12 22C7.993 22 5.99 22 4.745 20.682C3.5 19.364 3.5 17.242 3.5 13C3.5 8.758 3.5 6.636 4.745 5.318C5.99 4 7.993 4 12 4C16.007 4 18.01 4 19.255 5.318C20.5 6.636 20.5 8.758 20.5 13C20.5 17.242 20.5 19.364 19.255 20.682C18.01 22 16.007 22 12 22Z"
                                stroke="#3C3C3C"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                            <path
                                d="M14.0178 9.49316C14.0178 10.0236 13.8071 10.5323 13.432 10.9074C13.057 11.2824 12.5483 11.4932 12.0178 11.4932C11.4874 11.4932 10.9787 11.2824 10.6036 10.9074C10.2285 10.5323 10.0178 10.0236 10.0178 9.49316C10.0178 8.96273 10.2285 8.45402 10.6036 8.07895C10.9787 7.70388 11.4874 7.49316 12.0178 7.49316C12.5483 7.49316 13.057 7.70388 13.432 8.07895C13.8071 8.45402 14.0178 8.96273 14.0178 9.49316ZM8.06283 16.7162C9.12083 15.0862 10.8018 14.4762 12.0178 14.4772C13.2338 14.4782 14.8658 15.0872 15.9238 16.7172C15.9918 16.8222 16.0108 16.9512 15.9488 17.0612C15.7018 17.5002 14.9328 18.3712 14.3788 18.4302C13.7408 18.4972 12.0718 18.5072 12.0188 18.5072C11.9658 18.5072 10.2468 18.4972 9.60883 18.4302C9.05283 18.3702 8.28483 17.5002 8.03683 17.0602C7.97583 16.9512 7.99483 16.8222 8.06283 16.7162Z"
                                stroke="#3C3C3C"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                        <NavLink to="/admin/contact">Əlaqə</NavLink>
                    </li>
                </div>
                <div>
                    <button onClick={confirmLogout}> {/* Changed to trigger modal */}
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 18 18"
                            fill="none"
                        >
                            <path
                                d="M2 18C1.45 18 0.979333 17.8043 0.588 17.413C0.196667 17.0217 0.000666667 16.5507 0 16V2C0 1.45 0.196 0.979333 0.588 0.588C0.98 0.196667 1.45067 0.000666667 2 0H8C8.28333 0 8.521 0.0960001 8.713 0.288C8.905 0.48 9.00067 0.717333 9 1C8.99933 1.28267 8.90333 1.52033 8.712 1.713C8.52067 1.90567 8.28333 2.00133 8 2H2V16H8C8.28333 16 8.521 16.096 8.713 16.288C8.905 16.48 9.00067 16.7173 9 17C8.99933 17.2827 8.90333 17.5203 8.712 17.713C8.52067 17.9057 8.28333 18.0013 8 18H2ZM14.175 10H7C6.71667 10 6.47933 9.904 6.288 9.712C6.09667 9.52 6.00067 9.28267 6 9C5.99933 8.71733 6.09533 8.48 6.288 8.288C6.48067 8.096 6.718 8 7 8H14.175L12.3 6.125C12.1167 5.94167 12.025 5.71667 12.025 5.45C12.025 5.18333 12.1167 4.95 12.3 4.75C12.4833 4.55 12.7167 4.44567 13 4.437C13.2833 4.42833 13.525 4.52433 13.725 4.725L17.3 8.3C17.5 8.5 17.6 8.73333 17.6 9C17.6 9.26667 17.5 9.5 17.3 9.7L13.725 13.275C13.525 13.475 13.2877 13.571 13.013 13.563C12.7383 13.555 12.5007 13.4507 12.3 13.25C12.1167 13.05 12.0293 12.8127 12.038 12.538C12.0467 12.2633 12.1423 12.034 12.325 11.85L14.175 10Z"
                                fill="#EE0000"
                            />
                        </svg>
                        Çıxış et
                    </button>
                </div>
            </div>

            {/* Confirmation Modal */}
            {showModal && (
                <div className="modal-overlay">
                    <div className="modal-content">
                        <button className="modal-close" onClick={handleCancelLogout}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                <path d="M12.8337 1.1665L1.16699 12.8332M1.16699 1.1665L12.8337 12.8332" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <div className={"modal-iconback1"}>
                            <div className={"modal-iconback2"}>

                                <div className="modal-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="45" height="44" viewBox="0 0 45 44" fill="none">
                                        <path d="M22.5013 24.5665L27.818 29.8832C28.1541 30.2193 28.5819 30.3874 29.1013 30.3874C29.6208 30.3874 30.0486 30.2193 30.3847 29.8832C30.7208 29.5471 30.8888 29.1193 30.8888 28.5999C30.8888 28.0804 30.7208 27.6527 30.3847 27.3165L25.068 21.9999L30.3847 16.6832C30.7208 16.3471 30.8888 15.9193 30.8888 15.3999C30.8888 14.8804 30.7208 14.4526 30.3847 14.1165C30.0486 13.7804 29.6208 13.6124 29.1013 13.6124C28.5819 13.6124 28.1541 13.7804 27.818 14.1165L22.5013 19.4332L17.1847 14.1165C16.8485 13.7804 16.4208 13.6124 15.9013 13.6124C15.3819 13.6124 14.9541 13.7804 14.618 14.1165C14.2819 14.4526 14.1138 14.8804 14.1138 15.3999C14.1138 15.9193 14.2819 16.3471 14.618 16.6832L19.9347 21.9999L14.618 27.3165C14.2819 27.6527 14.1138 28.0804 14.1138 28.5999C14.1138 29.1193 14.2819 29.5471 14.618 29.8832C14.9541 30.2193 15.3819 30.3874 15.9013 30.3874C16.4208 30.3874 16.8485 30.2193 17.1847 29.8832L22.5013 24.5665ZM22.5013 40.3332C19.9652 40.3332 17.5819 39.8517 15.3513 38.8886C13.1208 37.9254 11.1805 36.6195 9.53048 34.9707C7.88048 33.3219 6.57453 31.3817 5.61264 29.1499C4.65075 26.9181 4.16919 24.5348 4.16797 21.9999C4.16675 19.465 4.64831 17.0816 5.61264 14.8499C6.57698 12.6181 7.88292 10.6778 9.53048 9.02901C11.178 7.38023 13.1183 6.07429 15.3513 5.11117C17.5843 4.14806 19.9677 3.6665 22.5013 3.6665C25.035 3.6665 27.4183 4.14806 29.6513 5.11117C31.8843 6.07429 33.8246 7.38023 35.4722 9.02901C37.1197 10.6778 38.4263 12.6181 39.3919 14.8499C40.3574 17.0816 40.8384 19.465 40.8347 21.9999C40.831 24.5348 40.3495 26.9181 39.39 29.1499C38.4306 31.3817 37.1246 33.3219 35.4722 34.9707C33.8197 36.6195 31.8795 37.9261 29.6513 38.8904C27.4232 39.8547 25.0399 40.3357 22.5013 40.3332Z" fill="#E60D0D"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <h3>Çıxış etmək istədiyinizə əminsiniz?</h3>
                        <p>Hesabdan çıxış edildikdən sonra bəzi məlumatlar itmə ehtimalı var.</p>
                        <div className="modal-actions">
                            <button className="modal-cancel" onClick={handleCancelLogout}>
                                Ləğv et
                            </button>
                            <button className="modal-confirm" onClick={handleConfirmLogout}>
                                Çıxış et
                            </button>
                        </div>
                    </div>
                </div>
            )}
        </section>
    );
}

export default AdminLeftBar;